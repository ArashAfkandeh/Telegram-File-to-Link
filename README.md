# ربات ذخیره‌ساز فایل تلگرام 📁

این ربات تلگرام به شما امکان می‌دهد فایل‌های ارسالی را روی سرور خود ذخیره کرده و لینک دانلود مستقیم آنها را دریافت کنید. فایل‌ها بر روی سرور شما ذخیره می‌شوند و از طریق HTTPS قابل دسترسی خواهند بود.

## امکانات 🚀

- ذخیره‌سازی امن فایل‌ها روی سرور شخصی
- دسترسی به فایل‌ها از طریق HTTPS با گواهی SSL معتبر
- محدود کردن دسترسی به کاربران مجاز
- حذف خودکار فایل‌های قدیمی
- پشتیبانی از پروکسی برای اتصال به تلگرام
- امنیت بالا با nginx و مدیریت دسترسی‌ها

## پیش‌نیازها 📋

- سرور لینوکس (ترجیحاً Ubuntu 20.04 یا بالاتر)
- دامنه یا ساب‌دامنه برای دسترسی HTTPS
- اکانت تلگرام برای ساخت ربات
- حداقل 1GB RAM و 10GB فضای دیسک

## روش نصب 🔧

### ۱. دریافت کلیدهای API تلگرام

1. به [my.telegram.org](https://my.telegram.org) بروید
2. وارد بخش API development tools شوید
3. یک برنامه جدید ایجاد کنید
4. مقادیر `api_id` و `api_hash` را یادداشت کنید

### ۲. ساخت ربات تلگرام

1. با [@BotFather](https://t.me/BotFather) در تلگرام چت کنید
2. دستور /newbot را ارسال کنید
3. مراحل ساخت ربات را طی کنید
4. توکن ربات را که BotFather می‌دهد یادداشت کنید

### ۳. نصب ربات روی سرور

دستور زیر را در ترمینال سرور اجرا کنید:

\`\`\`bash
curl -sSL https://raw.githubusercontent.com/khoomeister/DLBot/master/install.sh | sudo bash -s -- YOUR_DOMAIN YOUR_EMAIL
\`\`\`

به جای `YOUR_DOMAIN` دامنه خود و به جای `YOUR_EMAIL` ایمیل خود را وارد کنید.

اسکریپت به صورت خودکار مراحل زیر را انجام می‌دهد:
1. نصب پیش‌نیازهای سیستمی
2. نصب و پیکربندی nginx
3. دریافت و نصب گواهی SSL
4. دریافت اطلاعات API تلگرام و تنظیمات ربات
5. راه‌اندازی سرویس ربات

## تنظیمات ⚙️

### پیکربندی ربات
فایل پیکربندی در مسیر `/var/www/html/bot/config.json` قرار دارد:

\`\`\`json
{
    "api_id": "YOUR_API_ID",
    "api_hash": "YOUR_API_HASH",
    "bot_token": "YOUR_BOT_TOKEN",
    "allowed_chat_ids": [123456789],
    "file_max_age_hours": 24,
    "your_domain": "your-domain.com",
    "download_path": "/var/www/html/dl"
}
\`\`\`

- **api_id**: شناسه API تلگرام
- **api_hash**: کلید API تلگرام
- **bot_token**: توکن ربات
- **allowed_chat_ids**: آرایه‌ای از شناسه عددی کاربران مجاز
- **file_max_age_hours**: مدت زمان نگهداری فایل‌ها (به ساعت)
- **your_domain**: دامنه سرور شما
- **download_path**: مسیر ذخیره فایل‌ها

### تنظیمات پروکسی (اختیاری)
برای استفاده از پروکسی، بخش زیر را به فایل config.json اضافه کنید:

\`\`\`json
{
    "proxy": {
        "scheme": "socks5",
        "server": "proxy-server",
        "port": 1080,
        "user": "username",  // اختیاری
        "pass": "password"   // اختیاری
    }
}
\`\`\`

## دستورات سیستمی 🛠️

### مدیریت سرویس ربات
\`\`\`bash
# مشاهده وضعیت
sudo systemctl status dlbot

# راه‌اندازی مجدد
sudo systemctl restart dlbot

# توقف ربات
sudo systemctl stop dlbot

# شروع ربات
sudo systemctl start dlbot

# غیرفعال کردن اجرای خودکار
sudo systemctl disable dlbot

# فعال کردن اجرای خودکار
sudo systemctl enable dlbot
\`\`\`

### مشاهده لاگ‌ها
\`\`\`bash
# مشاهده لاگ‌های ربات
sudo journalctl -u dlbot

# مشاهده لاگ‌های nginx
sudo tail -f /var/log/nginx/error.log
\`\`\`

## نکات امنیتی 🔒

1. حتماً از HTTPS استفاده کنید
2. فقط پورت‌های ضروری (80، 443، 22) را باز نگه دارید
3. از فایروال استفاده کنید
4. دسترسی‌ها را محدود کنید
5. مرتباً لاگ‌ها را بررسی کنید
6. سیستم را به‌روز نگه دارید

## عیب‌یابی ⚠️

### خطای اتصال به تلگرام
1. بررسی کنید دسترسی به api.telegram.org دارید
2. در صورت نیاز از پروکسی استفاده کنید
3. تنظیمات فایروال را بررسی کنید

### خطای SSL
1. مطمئن شوید دامنه به سرور شما اشاره می‌کند
2. گواهی SSL را تمدید کنید:
\`\`\`bash
sudo ~/.acme.sh/acme.sh --renew -d your-domain.com
\`\`\`

### مشکلات دسترسی به فایل
1. مجوزهای دایرکتوری را بررسی کنید:
\`\`\`bash
sudo chown -R www-data:www-data /var/www/html
sudo chmod -R 755 /var/www/html
\`\`\`

## ارتقاء 🔄

برای به‌روزرسانی به آخرین نسخه:

\`\`\`bash
cd /root/DLBot
git pull
sudo systemctl restart dlbot
\`\`\`

## مشارکت 👥

از مشارکت شما در بهبود این پروژه استقبال می‌کنیم! لطفاً:

1. پروژه را Fork کنید
2. یک Branch جدید بسازید
3. تغییرات خود را اعمال کنید
4. یک Pull Request ارسال کنید

## لایسنس 📝

این پروژه تحت لایسنس MIT منتشر شده است.
